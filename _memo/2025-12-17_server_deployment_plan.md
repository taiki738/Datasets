# サーバー設計・運用計画

## 1. 背景

開発した画像評価アンケートツールは現在、ローカルPC上で実行されている。これを常時稼働させるためには、ローカルPCをサーバーにし続けるのは現実的ではないため、インターネット上のサーバーへアプリケーションを移行（デプロイ）する必要がある。

## 2. デプロイ先の選定

アプリケーションの規模、メンテナンスの容易さ、コストを考慮し、以下の3つの選択肢を検討する。

### 選択肢1: PaaS (Platform as a Service) - **推奨**
- **概要:** アプリケーションの実行環境がまるごと提供されるサービス。インフラ管理をサービス側に任せ、開発者はコードのデプロイに集中できる。
- **代表的なサービス:** Render, Heroku
- **メリット:**
    - **設定が容易:** Gitリポジトリを連携させるだけで、`git push`をトリガーに自動でデプロイが完了する。
    - **無料プラン:** 小規模プロジェクト向けの無料枠が存在する。
    - **メンテナンス不要:** OSのセキュリティアップデートなどの保守作業が不要。
- **デメリット:**
    - **柔軟性が低い:** 提供された環境の範囲でしかカスタマイズできない。
    - **スリープ:** 無料プランでは、長期間アクセスがない場合にアプリケーションがスリープ状態になり、初回アクセス時の起動が遅くなることがある。

### 選択肢2: IaaS / VPS (Infrastructure as a Service / Virtual Private Server)
- **概要:** クラウド上に仮想サーバーをレンタルし、OSレベルから自分で環境を構築・管理する方法。
- **代表的なサービス:** DigitalOcean, Linode, AWS EC2, Google Compute Engine
- **メリット:**
    - **完全な柔軟性:** サーバーの構成を自由にコントロールできる。
    - **コストパフォーマンス:** 同程度のスペックであればPaaSより安価な場合が多い。
- **デメリット:**
    - **高度な専門知識:** サーバーのセットアップ、セキュリティ設定、継続的なメンテナンスのすべてを自分で行う必要がある。
    - **手動のデプロイ:** デプロイの仕組みを自前で構築する必要がある。

### 選択肢3: コンテナ化 (Docker)
- **概要:** アプリケーションとその実行環境を「コンテナ」にパッケージ化し、サーバー上で実行する。PaaSやIaaSと組み合わせて利用される。
- **代表的な技術:** Docker
- **メリット:**
    - **環境の再現性:** ローカル環境と本番環境を完全に一致させることができる。
- **デメリット:**
    - **学習コスト:** Dockerの概念を習得する必要がある。
    - **過剰:** 本プロジェクトの現在の規模では、やや大掛かりすぎる。

---

## 3. 推奨アプローチと次期ステップ

**結論として、本プロジェクトの最初のデプロイ先としては、選択肢1のPaaS、特に[Render](https://render.com/)が最適である。**

### 推奨理由
- **手軽さとスピード:** 最も簡単かつ迅速にアプリケーションをインターネット上に公開できる。
- **開発フローとの親和性:** 現在のGitHubベースのワークフローをそのまま活用した自動デプロイが実現できる。
- **コスト:** 無料プランで十分に運用を開始できる。
- **データベースの移行:** 現在の`SQLite`（ファイルDB）から、Renderが提供する`PostgreSQL`（サーバーDB）へ容易に移行でき、より堅牢なデータ管理が可能になる。

### 次期ステップ（Renderへのデプロイ準備）
もしこのアプローチを採用する場合、アプリケーションをPaaS環境に対応させるため、以下の準備作業が必要となる。

1.  **本番用Webサーバーの導入:**
    - 現在のFlask開発サーバーから、本番環境で推奨される`gunicorn`に切り替える。
2.  **データベース設定の変更:**
    - `SQLite`から`PostgreSQL`に接続できるように、接続ロジックを変更する。
3.  **設定ファイルの作成:**
    - Renderに対して、ビルド方法や起動コマンドを指示するための設定ファイル（`render.yaml`）を作成する。
